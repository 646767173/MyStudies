<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 
        如果真的需要兼容IE7及以下浏览器
        最好的办法是引入一个外部JS文件来处理JSON数据
        这个JS文件实质上就是为这些没有JSON的浏览器去创建了一个JSON格式对象
     -->
    <script src="./json2.js"></script>
    <script>
        /* 
            JSON ( JavaScript Object Notation ) JS对象表示法

                -JS中的对象只有JS自己认识，其他语言都不认识
                -反之亦然，其他语言的对象JS也不认识
                -因此我们需要把对象转为一个语言都认识的格式才能进行传递
                
                JSON是一个特殊格式的字符串，这个字符串可以被任一语言识别
                并且可以转换为任意语言中的对象
                因此JSON在开发中主要用于数据的交互

                ! JSON和JS对象的格式一样，只不过JSON字符串中的属性名必须加双引号
                    其他的和JS语法一致

            JSON分类
                1.对象{}
                2.数组[]

            JSON允许的值
                1.字符串
                2.数值
                3.布尔值
                4.null
                5.对象
                6.数组
        */
        var obj = { name:"abc",age:18,gender:"male" };
        var arr = [1,2,3,"havefun",true];

        var json1 = '{ "name":"abc","age":18,"gender":"male" }'; //自定义一个JSON时属性名必须加双引号
        var json2 = '[1,2,3,"havefun",true]';//数组JSON

        /* 
            将JSON字符串转换为JS对象
                JS中为我们提供了一个名为JSON的工具类
                这个JSON工具类可以帮我实现 JS对象 和 JSON 格式的互换

                JSON.parse()
                    -把一个JSON转换为JS对象，并返回
                JSON.stringify()
                    -把一个JS对象转换为JSON，并返回
        */
        console.log(JSON);

        var js1 = JSON.parse(json1);
        var js2 = JSON.parse(json2);
        console.log(js1);
        console.log(js2);

        var json_1 = JSON.stringify(obj);//会自动帮你在属性名上加上双引号
        var json_2 = JSON.stringify(arr);
        console.log(json_1);
        console.log(json_2);

        // 可是JSON在IE7及以下的浏览器中不支持
        /* 
            在IE7及以下浏览器
            需要使用eval()
                -该函数可以执行一段字符串形式的JS代码，并将结果返回
                -当执行的代码里含有{}，它会认为是代码块{}
                    如果不希望识别为代码块则需要在代码前后加个括号
                -eval()函数功能强大，可以直接执行一个字符串内的JS代码
                    但是开发中尽量不要使用
                    首先是它的执行性能较差，然后它还具有安全隐患
        */
        var str = eval( '(' +json_1+ ')' );//将json变回一个JS代码
        console.log(str);
    </script>
</head>
<body>
    
</body>
</html>